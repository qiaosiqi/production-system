# 腹痛诊断产生式系统

## 项目介绍

这是一个基于产生式规则的腹痛诊断系统，使用Python和Tkinter开发，具备图形用户界面和完整的数据库支持。系统能够根据用户选择的症状，通过推理引擎应用规则库进行诊断，并提供结果解释。

## 功能特点

1. **图形用户界面** - 直观易用的Tkinter界面，支持症状选择、诊断执行和结果查看
2. **数据库管理** - 使用SQLite数据库存储症状、诊断结果和规则
3. **推理引擎** - 基于产生式规则的推理系统，支持多规则匹配
4. **规则管理** - 完整的规则增删改查功能
5. **诊断结果** - 提供详细的诊断结果和推理过程
6. **文件导出** - 支持将诊断结果导出到文本文件
7. **知识图谱概念** - 采用知识图谱的思想组织症状、规则和诊断结果的关系

## 技术栈

- Python 3.x
- Tkinter (图形界面)
- SQLite (数据库)

## 项目结构

```
production-system/
├── main.py                # 主程序入口
├── gui.py                 # 图形用户界面模块
├── inference_engine.py    # 推理引擎模块
├── db_manager.py          # 数据库管理模块
├── abdomen_pain.db        # SQLite数据库文件
├── README.md              # 项目说明文档
└── .gitignore            # Git忽略文件
```

## 安装和运行

### 前提条件

- Python 3.6或更高版本

### 运行步骤

1. 克隆或下载项目到本地

2. 进入项目目录

3. 运行主程序：
   ```bash
   python main.py
   ```

系统将自动初始化数据库并启动图形界面。

## 使用说明

### 诊断流程

1. 在左侧症状列表中选择患者出现的症状
2. 点击"开始诊断"按钮
3. 系统将在右侧显示诊断结果和推理过程
4. 可以点击"保存结果"将诊断结果导出到文本文件

### 规则管理

1. 点击"规则管理"按钮打开规则管理窗口
2. 可以查看现有规则列表
3. 点击"添加规则"创建新规则
4. 选择现有规则后，可以点击"编辑规则"或"删除规则"

## 扩展和定制

### 替换领域素材

系统设计具有良好的扩展性，可以轻松替换为其他诊断领域：

1. 修改数据库中的症状表、诊断结果表和规则表
2. 症状表：存储特定领域的症状信息
3. 诊断结果表：存储该领域的可能诊断结果
4. 规则表：定义症状与诊断结果之间的关联规则

### 增加用户输入功能

当前系统支持从预设列表中选择症状，可以通过以下方式增加用户输入功能：

1. 在GUI中添加文本输入框，允许用户输入自定义症状
2. 在数据库中添加相应的存储和查询逻辑
3. 在推理引擎中支持自定义症状的匹配

### 优化算法

系统当前使用的是基本的产生式规则匹配算法，可以通过以下方式优化：

1. 实现规则优先级机制
2. 增加冲突消解策略
3. 实现反向推理功能
4. 加入不确定性推理支持

### 知识图谱设计

系统已经采用了知识图谱的基本概念，将症状、规则和诊断结果组织为关联的知识网络。可以进一步扩展为更完整的知识图谱：

1. 增加实体之间的关系类型（如"导致"、"伴随"、"排除"等）
2. 实现知识图谱的可视化展示
3. 增加知识图谱的推理和查询功能

## 数据库结构

### 症状表 (symptoms)
- id: 症状ID
- name: 症状名称
- description: 症状描述

### 诊断结果表 (diagnostics)
- id: 诊断结果ID
- name: 诊断结果名称
- description: 诊断结果描述

### 规则表 (rules)
- id: 规则ID
- premises: 前提条件（症状ID列表，逗号分隔）
- conclusion: 结论（诊断结果ID）
- description: 规则描述

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目。

## 许可证

本项目采用MIT许可证。